webpackJsonp([27],{qS9H:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("mvHQ"),i=s.n(r),o=s("ZyLO"),a={name:"",data:function(){return{role_obj:{Name:"",PermissionList:[]},permission:[],defaultProps:{children:"children",label:"Name"},Prompt:"",rules:{Name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:1,max:20,message:"长度在 3 到 5 个字符",trigger:"blur"}]}}},methods:{get_permission:function(){Object(o.d)(this,"get","/permission","",this.permission_return)},permission_return:function(e){console.log("权限列表",e);this.permission=Object(o.f)(e.Memory,null);var t=this.$route.params;t.id&&Object(o.d)(this,"get","/role/id?role_id="+t.id,"",this.role_id)},role_id:function(e){if(console.log("获取单个角色",e),e.Result){this.role_obj=e.Memory;for(var t=[],s=0;s<e.Memory.permission.length;s++)if(e.Memory.permission[s].ParentId&&null!=e.Memory.permission[s].ParentId)t.push(e.Memory.permission[s].Id);else for(var r=0;r<this.permission.length;r++)e.Memory.permission[s].Id!=this.permission[r].Id||this.permission[r].children||t.push(e.Memory.permission[s].Id);this.$refs.tree.setCheckedKeys(t)}},retu:function(){window.history.back()},form_1:function(){var e=this;this.$refs.formName.validate(function(t){if(!t)return!1;var s,r=e.$refs.tree.getCheckedKeys(),a=e.$refs.tree.getHalfCheckedKeys();s=r.concat(a),e.role_obj.PermissionList=s,e.role_obj.Id?Object(o.d)(e,"patch","/role",i()(e.role_obj),e.role_retun):Object(o.d)(e,"post","/role",i()(e.role_obj),e.role_retun)})},role_retun:function(e){console.log(e),e.Result?window.history.back():this.$message({showClose:!0,message:e.Message,type:"error"})}},created:function(){this.get_permission()},mounted:function(){}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"roleDetails"}},[s("div",{staticClass:"container"},[e._m(0),e._v(" "),s("el-form",{ref:"formName",staticClass:"mt-4",attrs:{model:e.role_obj,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"角色名称",prop:"Name"}},[s("el-input",{model:{value:e.role_obj.Name,callback:function(t){e.$set(e.role_obj,"Name",t)},expression:"role_obj.Name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"权限选择"}},[s("div",{staticClass:"form-control"},[s("el-tree",{ref:"tree",attrs:{data:e.permission,"show-checkbox":"","default-expand-all":"","node-key":"Id",props:e.defaultProps}})],1)]),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.form_1}},[e._v("提交")]),e._v(" "),s("el-button",{on:{click:function(t){e.retu()}}},[e._v("返回")])],1)],1)],1),e._v(" "),s("div",{staticClass:"modal_1 modal fade bs-example-modal-sm",attrs:{id:"myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[e._m(1),e._v(" "),s("div",{staticClass:"modal-body"},[e._v("\n\t\t        "+e._s(e.Prompt)+"\n\t\t      ")]),e._v(" "),e._m(2)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex align-items-center bread border-bottom"},[this._v("您的位置："),t("a",{attrs:{href:"#"}},[this._v(" 角色管理 ")]),this._v(" > 角色设定")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[this._v("提示")]),this._v(" "),t("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[t("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"modal-footer"},[t("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[this._v("关闭")])])}]};var n=s("VU/8")(a,l,!1,function(e){s("qyNL")},null,null);t.default=n.exports},qyNL:function(e,t){}});
//# sourceMappingURL=27.3b0af57d3d8f32ec277f.js.map